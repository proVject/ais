import{_ as B,u as F,a as L,b as q,r as i,c as I,d as p,e as R,f as w,g as l,w as o,h as n,E as _,i as D,o as r,F as j,j as z,k as b,l as V,m as P}from"./index-fopiJ3eL.js";const G={key:0,class:"new-template"},H=["src"],J={__name:"AddTemplate",setup(K){F();const y=D(),h=L(),d=q(),c=i(null),f=i(null),a=i({name:"",description:"",tags:[],width:null,height:null,preview_image:null}),T={name:[{required:!0,message:"Обов'язкове поле"}],width:[{required:!0,message:"Обов'язкове поле"}],height:[{required:!0,message:"Обов'язкове поле"}]},k=s=>{const e=new FileReader;e.readAsDataURL(s),e.onload=m=>{c.value=m.target.result,a.value.preview_image=s}},C=async()=>{f.value.validate(async s=>{if(s)try{await d.createCanvasTemplate(a.value),_.success({title:"Успіх",message:"Шаблон створено успішно"}),y.push({name:"Index"})}catch(e){_.error({title:"Помилка",message:e.message})}})},U=I(()=>d.canvasTemplateTags.map(s=>({value:s,label:s})));return(async()=>{try{await d.getCanvasTemplateTags()}catch(s){_.error({message:s.message})}})(),(s,e)=>{const m=n("el-input"),u=n("el-form-item"),x=n("el-option"),A=n("el-select"),g=n("el-input-number"),v=n("el-button"),E=n("el-upload"),N=n("el-form"),S=n("el-card");return w(h).isLoggedIn?(r(),p("div",G,[l(S,null,{header:o(()=>e[5]||(e[5]=[P("span",null,"Створити шаблон",-1)])),default:o(()=>[l(N,{ref_key:"formEl",ref:f,model:a.value,rules:T,"label-position":"top"},{default:o(()=>[l(u,{prop:"name",label:"Назва"},{default:o(()=>[l(m,{modelValue:a.value.name,"onUpdate:modelValue":e[0]||(e[0]=t=>a.value.name=t)},null,8,["modelValue"])]),_:1}),l(u,{prop:"description",label:"Опис"},{default:o(()=>[l(m,{resize:"none",rows:"4",type:"textarea",modelValue:a.value.description,"onUpdate:modelValue":e[1]||(e[1]=t=>a.value.description=t)},null,8,["modelValue"])]),_:1}),l(u,{prop:"tags",label:"Теги"},{default:o(()=>[l(A,{modelValue:a.value.tags,"onUpdate:modelValue":e[2]||(e[2]=t=>a.value.tags=t),multiple:"",filterable:"","default-first-option":"","reserve-keyword":!1},{default:o(()=>[(r(!0),p(j,null,z(U.value,t=>(r(),b(x,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(u,{prop:"width",label:"Ширина"},{default:o(()=>[l(g,{min:"1",style:{width:"100%"},modelValue:a.value.width,"onUpdate:modelValue":e[3]||(e[3]=t=>a.value.width=t)},null,8,["modelValue"])]),_:1}),l(u,{prop:"height",label:"Висота"},{default:o(()=>[l(g,{min:"1",style:{width:"100%"},modelValue:a.value.height,"onUpdate:modelValue":e[4]||(e[4]=t=>a.value.height=t)},null,8,["modelValue"])]),_:1}),l(u,{prop:"preview_image",label:"Зображення","label-position":"left"},{default:o(()=>[l(E,{"show-file-list":!1,"before-upload":k,accept:"image/*"},{default:o(()=>[a.value.preview_image?(r(),p("img",{key:0,class:"upload-image",src:c.value},null,8,H)):(r(),b(v,{key:1,type:"primary"},{default:o(()=>e[6]||(e[6]=[V("Завантажити")])),_:1,__:[6]}))]),_:1})]),_:1}),l(v,{type:"primary",plain:"",loading:w(d).createCanvasTemplateLoading,onClick:C},{default:o(()=>e[7]||(e[7]=[V("Створити")])),_:1,__:[7]},8,["loading"])]),_:1},8,["model"])]),_:1})])):R("",!0)}}},Q=B(J,[["__scopeId","data-v-923f5ffc"]]);export{Q as default};
